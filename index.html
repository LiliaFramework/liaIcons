<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Slideshow</title>
  <style>
    body,html{margin:0;padding:0;height:100%;background:#000;display:flex;align-items:center;justify-content:center}
    .slideshow{position:relative;width:90%;max-width:900px;height:60vh;overflow:hidden}
    .slideshow img{position:absolute;width:100%;height:100%;object-fit:contain;opacity:0;transition:opacity 1s}
    .slideshow img.active{opacity:1}
    .controls{position:absolute;top:50%;width:100%;display:flex;justify-content:space-between;transform:translateY(-50%)}
    .controls button{background:rgba(0,0,0,0.5);border:none;color:#fff;padding:12px 18px;font-size:1rem;cursor:pointer}
  </style>
</head>
<body>
  <div class="slideshow"></div>
  <div class="controls">
    <button id="prev">Prev</button>
    <button id="next">Next</button>
  </div>
  <script>
    (async ()=>{
      const url = location.pathname.replace(/\/?$/, '/');
      const res = await fetch(url);
      const html = await res.text();
      const doc = new DOMParser().parseFromString(html, 'text/html');
      const images = [...doc.querySelectorAll('a')]
        .map(a=>a.getAttribute('href'))
        .filter(h=>/\.(jpe?g|png|gif|webp)$/i.test(h))
        .map(h=>new URL(h, location.href).href);
      const container = document.querySelector('.slideshow');
      if (images.length === 0) {
        container.textContent = 'No images found';
        document.querySelector('.controls').style.display = 'none';
        return;
      }
      images.forEach(src=>{
        const img = new Image();
        img.src = src;
        container.appendChild(img);
      });
      const slides = container.querySelectorAll('img');
      let idx = 0;
      slides[idx].classList.add('active');
      const show = n => {
        slides[idx].classList.remove('active');
        idx = (n + slides.length) % slides.length;
        slides[idx].classList.add('active');
      };
      document.getElementById('next').onclick = ()=> show(idx + 1);
      document.getElementById('prev').onclick = ()=> show(idx - 1);
      setInterval(()=> show(idx + 1), 5000);
    })();
  </script>
</body>
</html>
